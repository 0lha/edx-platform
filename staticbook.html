<%inherit file="main.html" />
<script>
var page=${ page };

$(document).ready(function(){
   $("#booknav").treeview({collapsed:true, unique:true/*, cookieId: "treeview-book-nav", persist: "cookie"*/});
});

function goto_page(n) {
  log_event("book", {"type":"gotopage","old":page,"new":n});
  page=n;
  var prefix = "";
  if(n<100) {
    prefix="0";
  }
  if(n<10) {
    prefix="00";
  }
  $("#bookpage").attr("src","/static/book/p"+prefix+n+".jpg");
};

function prev_page() {
  var newpage=page-1;
  if(newpage<1) newpage=1;
  goto_page(newpage);
  log_event("book", {"type":"prevpage","new":page});
}

function next_page() {
  var newpage=page+1;
  if(newpage>1764) newpage=1764;
  goto_page(newpage);
  log_event("book", {"type":"nextpage","new":page});
}

</script>
<div id="bodyContent">
<table width=100% cellpadding=0><tr>
<td valign=top>
    <div id="coursenav">
       <a href="/book"><b>Textbook</b></a> 
<span class="ui-icon ui-icon-bullet" style="display:inline-block;"></span> 
       <a href="/courseware">Courseware</a> 
<span class="ui-icon ui-icon-bullet" style="display:inline-block;"></span> 
<a href="/discussion">Discussion</a> 
<span class="ui-icon ui-icon-bullet" style="display:inline-block;"></span> 
<a href="/wiki">Wiki</a> 
<span class="ui-icon ui-icon-bullet" style="display:inline-block;"></span> 
<a href="/profile">Profile</a> 
<span class="ui-icon ui-icon-bullet" style="display:inline-block;"></span> 
<a href="/s/help.html">Help</a> <span class="ui-icon ui-icon-bullet" style="display:inline-block;"></span> 
<a href="/logout">Log out</a>
    </div>
<table>
<tr><td valign=top>
<ul id="booknav" class="treeview-booknav">
<%include file="book_toc.html" />
</ul>
</td><td width=10></td><td width=1 bgcolor=black></td><td>
    <div align=center>
<table>
<tr><td><a href="javascript:prev_page()"><span class="ui-icon ui-icon-circle-triangle-w">&nbsp;</span></a></td><td>
<img id="bookpage" src="/static/book/p${ "%03i"%(page) }.jpg">
</td><td><a href="javascript:next_page()"><span class="ui-icon ui-icon-circle-triangle-e">&nbsp;</span></a></td></tr>
       </div>
</td>
</tr></table></td></tr>
</table>

</div>
